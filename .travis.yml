os:
  - linux
  - osx

env:
  matrix:
    - EMACS=emacs24
    - EMACS=emacs25
  global:
    - SOME_TOKEN=some_value

install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
        brew update
        brew install emacs
        brew linkapps emacs
    fi
    if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
        if [[ "$EMACS" == "emacs24" ]]; then
            sudo add-apt-repository -y ppa:cassou/emacs &&
            sudo apt-get -qq update &&
            sudo apt-get -qq -f install &&
            sudo apt-get -qq install emacs24;
        elif [[ "$EMACS" == "emacs25" ]]; then
            sudo add-apt-repository -y ppa:kelleyk/emacs &&
            sudo apt-get -qq update &&
            sudo apt-get -qq -f install &&
            sudo apt-get -qq install emacs25;
        fi
    fi

###
### the actual build/test command
###
### Use "make test-batch" to test without byte-compiling.
### The default command avoids byte-compiling on Emacs 22.
###

script:
  $EMACS --version && rm -rf ~/.org-export && tests/test.sh

###
### settings
###

notifications:
  email: noah.hoffman@gmail.com

